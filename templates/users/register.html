{% load static %}

<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Реєстрація</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>

<body class="body_login">
<div class="container">
  <img class="logo_log" src="{% static 'img/logo.png' %}" alt="Лого" />

  <form method="post">
    {% csrf_token %}

    <label class="label_login">{{ form.type_user.label }}</label>
    <div class="custom-select-container">
        <div class="custom-select-selected">Виберіть тип користувача
        <i class="fas fa-chevron-down custom-select-arrow"></i></div>

        <div class="custom-select-options">
            {% for value, label in form.type_user.field.choices %}
                <div class="custom-select-option" data-value="{{ value }}">{{ label }}</div>
            {% endfor %}

        </div>

    </div>

    <!-- Правильне приховане поле -->
    <input type="hidden" name="type_user" id="hiddenTypeUser">

    <label class="label_login">{{ form.email.label }}</label>
    {{ form.email }}

    <button class="button_llr" type="submit" id="submitBtn">Зареєструватися</button>
  </form>
</div>
</body>
</html>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const selectContainer = document.querySelector(".custom-select-container");
    const selectedElement = document.querySelector(".custom-select-selected");
    const optionsContainer = document.querySelector(".custom-select-options");
    const options = document.querySelectorAll(".custom-select-option");
    const hiddenTypeUser = document.getElementById("hiddenTypeUser");

    // Відкривати/закривати список
    selectedElement.addEventListener("click", function () {
        selectContainer.classList.toggle("active");
    });

    // Вибір опції
    options.forEach(option => {
        option.addEventListener("click", function () {
            selectedElement.textContent = this.textContent;
            hiddenTypeUser.value = this.dataset.value;  // Оновлюємо значення прихованого поля
            selectContainer.classList.remove("active");
        });
    });

    // Закривати список при кліку поза ним
    document.addEventListener("click", function (e) {
        if (!selectContainer.contains(e.target)) {
            selectContainer.classList.remove("active");
        }
    });

    // Перевірка перед відправкою форми
    document.getElementById("submitBtn").addEventListener("click", function (e) {
        if (!hiddenTypeUser.value) {
            e.preventDefault();
            alert("Будь ласка, виберіть тип користувача!");
        }
    });
});
</script>